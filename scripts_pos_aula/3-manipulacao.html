<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Beatriz Milz">

<title>Tópico 3 - Manipulação de dados com dplyr</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="3-manipulacao_files/libs/clipboard/clipboard.min.js"></script>
<script src="3-manipulacao_files/libs/quarto-html/quarto.js"></script>
<script src="3-manipulacao_files/libs/quarto-html/popper.min.js"></script>
<script src="3-manipulacao_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="3-manipulacao_files/libs/quarto-html/anchor.min.js"></script>
<link href="3-manipulacao_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="3-manipulacao_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="3-manipulacao_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="3-manipulacao_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="3-manipulacao_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Tópico 3 - Manipulação de dados com dplyr</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor</div>
    <div class="quarto-title-meta-contents">
             <p>Beatriz Milz </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Data de Publicação</div>
    <div class="quarto-title-meta-contents">
      <p class="date">24 de agosto de 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Vamos começar carregando os pacotes que vamos utilizar neste script.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Então podemos importar a base de dados que vamos utilizar:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">"../dados/base_pnud_min.csv"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Quais são as informações disponíveis na base?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dicionario_pnud <span class="ot">&lt;-</span> <span class="fu">read_csv2</span>(<span class="st">"../dados/dicionario_base_pnud_min.csv"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>dicionario_pnud  <span class="sc">|&gt;</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 1%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">sigla</th>
<th style="text-align: left;">nome_curto</th>
<th style="text-align: left;">nome_longo</th>
<th style="text-align: left;">definicao</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">espvida</td>
<td style="text-align: left;">Esperança de vida ao nascer</td>
<td style="text-align: left;">Esperança de vida ao nascer</td>
<td style="text-align: left;">Número médio de anos que as pessoas deverão viver a partir do nascimento, se permanecerem constantes ao longo da vida o nível e o padrão de mortalidade por idade prevalecentes no ano do Censo.</td>
</tr>
<tr class="even">
<td style="text-align: left;">gini</td>
<td style="text-align: left;">Índice de Gini</td>
<td style="text-align: left;">Índice de Gini</td>
<td style="text-align: left;">Mede o grau de desigualdade existente na distribuição de indivíduos segundo a renda domiciliar per capita. Seu valor varia de 0, quando não há desigualdade (a renda domiciliar per capita de todos os indivíduos tem o mesmo valor), a 1, quando a desigualdade é máxima (apenas um indivíduo detém toda a renda).O universo de indivíduos é limitado àqueles que vivem em domicílios particulares permanentes.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">idhm</td>
<td style="text-align: left;">IDHM</td>
<td style="text-align: left;">Índice de Desenvolvimento Humano Municipal</td>
<td style="text-align: left;">Índice de Desenvolvimento Humano Municipal. Média geométrica dos índices das dimensões Renda, Educação e Longevidade, com pesos iguais.</td>
</tr>
<tr class="even">
<td style="text-align: left;">idhm_e</td>
<td style="text-align: left;">IDHM Educação</td>
<td style="text-align: left;">Índice de Desenvolvimento Humano Municipal - Dimensão Educação</td>
<td style="text-align: left;">Índice sintético da dimensão Educação que é um dos 3 componentes do IDHM. É obtido através da média geométrica do subíndice de frequência de crianças e jovens à escola, com peso de 2/3, e do subíndice de escolaridade da população adulta, com peso de 1/3.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">idhm_l</td>
<td style="text-align: left;">IDHM Longevidade</td>
<td style="text-align: left;">Índice de Desenvolvimento Humano Municipal - Dimensão Longevidade</td>
<td style="text-align: left;">Índice da dimensão Longevidade que é um dos 3 componentes do IDHM. É obtido a partir do indicador Esperança de vida ao nascer, através da fórmula: [(valor observado do indicador) - (valor mínimo)] / [(valor máximo) - (valor mínimo)], onde os valores mínimo e máximo são 25 e 85 anos, respectivamente.</td>
</tr>
<tr class="even">
<td style="text-align: left;">idhm_r</td>
<td style="text-align: left;">IDHM Renda</td>
<td style="text-align: left;">Índice de Desenvolvimento Humano Municipal - Dimensão Renda</td>
<td style="text-align: left;">Índice da dimensão Renda que é um dos 3 componentes do IDHM. É obtido a partir do indicador Renda per capita, através da fórmula: [ln (valor observado do indicador) - ln (valor mínimo)] / [ln (valor máximo) - ln (valor mínimo)], onde os valores mínimo e máximo são R$ 8,00 e R$ 4.033,00 (a preços de agosto de 2010).</td>
</tr>
<tr class="odd">
<td style="text-align: left;">muni_id</td>
<td style="text-align: left;">Código do Município</td>
<td style="text-align: left;">Código do Município</td>
<td style="text-align: left;">Código utilizado pelo IBGE para identificação do município(com digito verificador).</td>
</tr>
<tr class="even">
<td style="text-align: left;">muni_nm</td>
<td style="text-align: left;">Nome do Município</td>
<td style="text-align: left;">Nome do município</td>
<td style="text-align: left;">Nome do município.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pop</td>
<td style="text-align: left;">População total em domicílios particulares permanentes</td>
<td style="text-align: left;">População total que reside em domicílios particulares permanentes</td>
<td style="text-align: left;">População residente em domicílios particulares permanentes. Exclui os residentes em domicílios coletivos, como pensões, hotéis, prisões, quartéis, hospitais.</td>
</tr>
<tr class="even">
<td style="text-align: left;">rdpc</td>
<td style="text-align: left;">Renda per capita</td>
<td style="text-align: left;">Renda per capita média</td>
<td style="text-align: left;">Razão entre o somatório da renda de todos os indivíduos residentes em domicílios particulares permanentes e o número total desses indivíduos. Valores em reais de 01/agosto de 2010.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">uf_sigla</td>
<td style="text-align: left;">Código da Unidade da Federação</td>
<td style="text-align: left;">Código da Unidade da Federação</td>
<td style="text-align: left;">Código utilizado pelo IBGE para identificação do estado.</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Podemos ver a estrutura da base de dados usando a função <code>glimpse()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dados_pnud)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 16,686
Columns: 15
$ ano       &lt;dbl&gt; 1991, 1991, 1991, 1991, 1991, 1991, 1991, 1991, 1991, 1991, …
$ muni_id   &lt;dbl&gt; 1100015, 1100023, 1100031, 1100049, 1100056, 1100064, 110007…
$ muni_nm   &lt;chr&gt; "ALTA FLORESTA D'OESTE", "ARIQUEMES", "CABIXI", "CACOAL", "C…
$ uf_sigla  &lt;chr&gt; "RO", "RO", "RO", "RO", "RO", "RO", "RO", "RO", "RO", "RO", …
$ regiao_nm &lt;chr&gt; "Norte", "Norte", "Norte", "Norte", "Norte", "Norte", "Norte…
$ idhm      &lt;dbl&gt; 0.329, 0.432, 0.309, 0.407, 0.386, 0.376, 0.203, 0.425, 0.38…
$ idhm_e    &lt;dbl&gt; 0.112, 0.199, 0.108, 0.171, 0.167, 0.151, 0.039, 0.220, 0.15…
$ idhm_l    &lt;dbl&gt; 0.617, 0.684, 0.636, 0.667, 0.629, 0.658, 0.572, 0.629, 0.65…
$ idhm_r    &lt;dbl&gt; 0.516, 0.593, 0.430, 0.593, 0.547, 0.536, 0.373, 0.553, 0.56…
$ espvida   &lt;dbl&gt; 62.01, 66.02, 63.16, 65.03, 62.73, 64.46, 59.32, 62.76, 64.1…
$ rdpc      &lt;dbl&gt; 198.46, 319.47, 116.38, 320.24, 240.10, 224.82, 81.38, 250.0…
$ gini      &lt;dbl&gt; 0.63, 0.57, 0.70, 0.66, 0.60, 0.62, 0.59, 0.65, 0.63, 0.60, …
$ pop       &lt;dbl&gt; 22835, 55018, 5846, 66534, 19030, 25070, 10737, 6902, 22505,…
$ lat       &lt;dbl&gt; -11.929, -9.913, -13.492, -11.438, -13.189, -13.117, -12.962…
$ lon       &lt;dbl&gt; -61.996, -63.041, -60.545, -61.448, -60.812, -60.542, -60.88…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>skim_pnud <span class="ot">&lt;-</span> <span class="fu">skim</span>(dados_pnud)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>starwars_skim <span class="ot">&lt;-</span> <span class="fu">skim</span>(starwars)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Podemos ver os nomes das colunas da base de dados usando a função <code>names()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(dados_pnud)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ano"       "muni_id"   "muni_nm"   "uf_sigla"  "regiao_nm" "idhm"     
 [7] "idhm_e"    "idhm_l"    "idhm_r"    "espvida"   "rdpc"      "gini"     
[13] "pop"       "lat"       "lon"      </code></pre>
</div>
</div>
<section id="dplyr" class="level2">
<h2 class="anchored" data-anchor-id="dplyr">dplyr</h2>
<ul>
<li><code>select()</code>: seleciona colunas da base de dados</li>
<li><code>filter()</code>: filtra linhas da base de dados</li>
<li><code>arrange()</code>: reordena as linhas da base de dados</li>
<li><code>mutate()</code>: cria novas colunas da base de dados (ou atualiza as colunas existentes)</li>
<li><code>group_by()</code> + <code>summarise()</code>: agrupa e sumariza da base de dados</li>
</ul>
</section>
<section id="select" class="level2">
<h2 class="anchored" data-anchor-id="select">select</h2>
<p>Podemos selecionar colunas da base de dados com a função <code>select()</code>.</p>
<p>Sintaxe: select(nome_da_base, regras_para_selecionar_colunas)</p>
<p>Selecionando uma coluna:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, muni_nm)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 1
   muni_nm              
   &lt;chr&gt;                
 1 ALTA FLORESTA D'OESTE
 2 ARIQUEMES            
 3 CABIXI               
 4 CACOAL               
 5 CEREJEIRAS           
 6 COLORADO DO OESTE    
 7 CORUMBIARA           
 8 COSTA MARQUES        
 9 ESPIGÃO D'OESTE      
10 GUAJARÁ-MIRIM        
# ℹ 16,676 more rows</code></pre>
</div>
</div>
<p>Obs: Enquanto a gente não usar a atribuição <code>&lt;-</code>, o objeto não é alterado!</p>
<p>Selecionando várias colunas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, muni_nm, uf_sigla, pop)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 3
   muni_nm               uf_sigla   pop
   &lt;chr&gt;                 &lt;chr&gt;    &lt;dbl&gt;
 1 ALTA FLORESTA D'OESTE RO       22835
 2 ARIQUEMES             RO       55018
 3 CABIXI                RO        5846
 4 CACOAL                RO       66534
 5 CEREJEIRAS            RO       19030
 6 COLORADO DO OESTE     RO       25070
 7 CORUMBIARA            RO       10737
 8 COSTA MARQUES         RO        6902
 9 ESPIGÃO D'OESTE       RO       22505
10 GUAJARÁ-MIRIM         RO       31240
# ℹ 16,676 more rows</code></pre>
</div>
</div>
<p>A função select respeita a ordem das colunas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, uf_sigla, muni_nm, pop)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 3
   uf_sigla muni_nm                 pop
   &lt;chr&gt;    &lt;chr&gt;                 &lt;dbl&gt;
 1 RO       ALTA FLORESTA D'OESTE 22835
 2 RO       ARIQUEMES             55018
 3 RO       CABIXI                 5846
 4 RO       CACOAL                66534
 5 RO       CEREJEIRAS            19030
 6 RO       COLORADO DO OESTE     25070
 7 RO       CORUMBIARA            10737
 8 RO       COSTA MARQUES          6902
 9 RO       ESPIGÃO D'OESTE       22505
10 RO       GUAJARÁ-MIRIM         31240
# ℹ 16,676 more rows</code></pre>
</div>
</div>
<p>O operador <code>:</code> pode ser usado aqui para selecionar uma sequência de colunas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, muni_nm<span class="sc">:</span>regiao_nm)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 3
   muni_nm               uf_sigla regiao_nm
   &lt;chr&gt;                 &lt;chr&gt;    &lt;chr&gt;    
 1 ALTA FLORESTA D'OESTE RO       Norte    
 2 ARIQUEMES             RO       Norte    
 3 CABIXI                RO       Norte    
 4 CACOAL                RO       Norte    
 5 CEREJEIRAS            RO       Norte    
 6 COLORADO DO OESTE     RO       Norte    
 7 CORUMBIARA            RO       Norte    
 8 COSTA MARQUES         RO       Norte    
 9 ESPIGÃO D'OESTE       RO       Norte    
10 GUAJARÁ-MIRIM         RO       Norte    
# ℹ 16,676 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, muni_nm<span class="sc">:</span>regiao_nm, lat<span class="sc">:</span>lon)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 5
   muni_nm               uf_sigla regiao_nm    lat   lon
   &lt;chr&gt;                 &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;
 1 ALTA FLORESTA D'OESTE RO       Norte     -11.9  -62.0
 2 ARIQUEMES             RO       Norte      -9.91 -63.0
 3 CABIXI                RO       Norte     -13.5  -60.5
 4 CACOAL                RO       Norte     -11.4  -61.4
 5 CEREJEIRAS            RO       Norte     -13.2  -60.8
 6 COLORADO DO OESTE     RO       Norte     -13.1  -60.5
 7 CORUMBIARA            RO       Norte     -13.0  -60.9
 8 COSTA MARQUES         RO       Norte     -12.4  -64.2
 9 ESPIGÃO D'OESTE       RO       Norte     -11.5  -61.0
10 GUAJARÁ-MIRIM         RO       Norte     -10.8  -65.3
# ℹ 16,676 more rows</code></pre>
</div>
</div>
<p>Podemos selecionar colunas por exclusão:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, <span class="sc">-</span>muni_id)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 14
     ano muni_nm     uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida  rdpc
   &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
 1  1991 ALTA FLORE… RO       Norte     0.329  0.112  0.617  0.516    62.0 198. 
 2  1991 ARIQUEMES   RO       Norte     0.432  0.199  0.684  0.593    66.0 319. 
 3  1991 CABIXI      RO       Norte     0.309  0.108  0.636  0.43     63.2 116. 
 4  1991 CACOAL      RO       Norte     0.407  0.171  0.667  0.593    65.0 320. 
 5  1991 CEREJEIRAS  RO       Norte     0.386  0.167  0.629  0.547    62.7 240. 
 6  1991 COLORADO D… RO       Norte     0.376  0.151  0.658  0.536    64.5 225. 
 7  1991 CORUMBIARA  RO       Norte     0.203  0.039  0.572  0.373    59.3  81.4
 8  1991 COSTA MARQ… RO       Norte     0.425  0.22   0.629  0.553    62.8 250. 
 9  1991 ESPIGÃO D'… RO       Norte     0.388  0.159  0.653  0.561    64.2 263. 
10  1991 GUAJARÁ-MI… RO       Norte     0.468  0.247  0.662  0.625    64.7 391. 
# ℹ 16,676 more rows
# ℹ 4 more variables: gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, <span class="sc">-</span><span class="fu">c</span>(lat, lon))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 13
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100015 ALTA FLO… RO       Norte     0.329  0.112  0.617  0.516    62.0
 2  1991 1100023 ARIQUEMES RO       Norte     0.432  0.199  0.684  0.593    66.0
 3  1991 1100031 CABIXI    RO       Norte     0.309  0.108  0.636  0.43     63.2
 4  1991 1100049 CACOAL    RO       Norte     0.407  0.171  0.667  0.593    65.0
 5  1991 1100056 CEREJEIR… RO       Norte     0.386  0.167  0.629  0.547    62.7
 6  1991 1100064 COLORADO… RO       Norte     0.376  0.151  0.658  0.536    64.5
 7  1991 1100072 CORUMBIA… RO       Norte     0.203  0.039  0.572  0.373    59.3
 8  1991 1100080 COSTA MA… RO       Norte     0.425  0.22   0.629  0.553    62.8
 9  1991 1100098 ESPIGÃO … RO       Norte     0.388  0.159  0.653  0.561    64.2
10  1991 1100106 GUAJARÁ-… RO       Norte     0.468  0.247  0.662  0.625    64.7
# ℹ 16,676 more rows
# ℹ 3 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, <span class="sc">-</span>lat, <span class="sc">-</span>lon)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 13
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100015 ALTA FLO… RO       Norte     0.329  0.112  0.617  0.516    62.0
 2  1991 1100023 ARIQUEMES RO       Norte     0.432  0.199  0.684  0.593    66.0
 3  1991 1100031 CABIXI    RO       Norte     0.309  0.108  0.636  0.43     63.2
 4  1991 1100049 CACOAL    RO       Norte     0.407  0.171  0.667  0.593    65.0
 5  1991 1100056 CEREJEIR… RO       Norte     0.386  0.167  0.629  0.547    62.7
 6  1991 1100064 COLORADO… RO       Norte     0.376  0.151  0.658  0.536    64.5
 7  1991 1100072 CORUMBIA… RO       Norte     0.203  0.039  0.572  0.373    59.3
 8  1991 1100080 COSTA MA… RO       Norte     0.425  0.22   0.629  0.553    62.8
 9  1991 1100098 ESPIGÃO … RO       Norte     0.388  0.159  0.653  0.561    64.2
10  1991 1100106 GUAJARÁ-… RO       Norte     0.468  0.247  0.662  0.625    64.7
# ℹ 16,676 more rows
# ℹ 3 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nome da coluna começa com um texto</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, <span class="fu">starts_with</span>(<span class="st">"muni"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 2
   muni_id muni_nm              
     &lt;dbl&gt; &lt;chr&gt;                
 1 1100015 ALTA FLORESTA D'OESTE
 2 1100023 ARIQUEMES            
 3 1100031 CABIXI               
 4 1100049 CACOAL               
 5 1100056 CEREJEIRAS           
 6 1100064 COLORADO DO OESTE    
 7 1100072 CORUMBIARA           
 8 1100080 COSTA MARQUES        
 9 1100098 ESPIGÃO D'OESTE      
10 1100106 GUAJARÁ-MIRIM        
# ℹ 16,676 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nome da coluna termina com um texto</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, <span class="fu">ends_with</span>(<span class="st">"nm"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 2
   muni_nm               regiao_nm
   &lt;chr&gt;                 &lt;chr&gt;    
 1 ALTA FLORESTA D'OESTE Norte    
 2 ARIQUEMES             Norte    
 3 CABIXI                Norte    
 4 CACOAL                Norte    
 5 CEREJEIRAS            Norte    
 6 COLORADO DO OESTE     Norte    
 7 CORUMBIARA            Norte    
 8 COSTA MARQUES         Norte    
 9 ESPIGÃO D'OESTE       Norte    
10 GUAJARÁ-MIRIM         Norte    
# ℹ 16,676 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nome da coluna contém um texto</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, <span class="fu">contains</span>(<span class="st">"_"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 7
   muni_id muni_nm               uf_sigla regiao_nm idhm_e idhm_l idhm_r
     &lt;dbl&gt; &lt;chr&gt;                 &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 1100015 ALTA FLORESTA D'OESTE RO       Norte      0.112  0.617  0.516
 2 1100023 ARIQUEMES             RO       Norte      0.199  0.684  0.593
 3 1100031 CABIXI                RO       Norte      0.108  0.636  0.43 
 4 1100049 CACOAL                RO       Norte      0.171  0.667  0.593
 5 1100056 CEREJEIRAS            RO       Norte      0.167  0.629  0.547
 6 1100064 COLORADO DO OESTE     RO       Norte      0.151  0.658  0.536
 7 1100072 CORUMBIARA            RO       Norte      0.039  0.572  0.373
 8 1100080 COSTA MARQUES         RO       Norte      0.22   0.629  0.553
 9 1100098 ESPIGÃO D'OESTE       RO       Norte      0.159  0.653  0.561
10 1100106 GUAJARÁ-MIRIM         RO       Norte      0.247  0.662  0.625
# ℹ 16,676 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, muni_nm, lat<span class="sc">:</span>lon, <span class="fu">starts_with</span>(<span class="st">"idh"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 7
   muni_nm                  lat   lon  idhm idhm_e idhm_l idhm_r
   &lt;chr&gt;                  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
 1 ALTA FLORESTA D'OESTE -11.9  -62.0 0.329  0.112  0.617  0.516
 2 ARIQUEMES              -9.91 -63.0 0.432  0.199  0.684  0.593
 3 CABIXI                -13.5  -60.5 0.309  0.108  0.636  0.43 
 4 CACOAL                -11.4  -61.4 0.407  0.171  0.667  0.593
 5 CEREJEIRAS            -13.2  -60.8 0.386  0.167  0.629  0.547
 6 COLORADO DO OESTE     -13.1  -60.5 0.376  0.151  0.658  0.536
 7 CORUMBIARA            -13.0  -60.9 0.203  0.039  0.572  0.373
 8 COSTA MARQUES         -12.4  -64.2 0.425  0.22   0.629  0.553
 9 ESPIGÃO D'OESTE       -11.5  -61.0 0.388  0.159  0.653  0.561
10 GUAJARÁ-MIRIM         -10.8  -65.3 0.468  0.247  0.662  0.625
# ℹ 16,676 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pacote tidyselect</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># apenas colunas numéricas</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, <span class="fu">where</span>(is.numeric))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 12
     ano muni_id  idhm idhm_e idhm_l idhm_r espvida  rdpc  gini   pop    lat
   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1  1991 1100015 0.329  0.112  0.617  0.516    62.0 198.   0.63 22835 -11.9 
 2  1991 1100023 0.432  0.199  0.684  0.593    66.0 319.   0.57 55018  -9.91
 3  1991 1100031 0.309  0.108  0.636  0.43     63.2 116.   0.7   5846 -13.5 
 4  1991 1100049 0.407  0.171  0.667  0.593    65.0 320.   0.66 66534 -11.4 
 5  1991 1100056 0.386  0.167  0.629  0.547    62.7 240.   0.6  19030 -13.2 
 6  1991 1100064 0.376  0.151  0.658  0.536    64.5 225.   0.62 25070 -13.1 
 7  1991 1100072 0.203  0.039  0.572  0.373    59.3  81.4  0.59 10737 -13.0 
 8  1991 1100080 0.425  0.22   0.629  0.553    62.8 250.   0.65  6902 -12.4 
 9  1991 1100098 0.388  0.159  0.653  0.561    64.2 263.   0.63 22505 -11.5 
10  1991 1100106 0.468  0.247  0.662  0.625    64.7 391.   0.6  31240 -10.8 
# ℹ 16,676 more rows
# ℹ 1 more variable: lon &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(dados_pnud<span class="sc">$</span>ano)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(dados_pnud<span class="sc">$</span>uf_sigla)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(dados_pnud, <span class="fu">where</span>(is.character))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 3
   muni_nm               uf_sigla regiao_nm
   &lt;chr&gt;                 &lt;chr&gt;    &lt;chr&gt;    
 1 ALTA FLORESTA D'OESTE RO       Norte    
 2 ARIQUEMES             RO       Norte    
 3 CABIXI                RO       Norte    
 4 CACOAL                RO       Norte    
 5 CEREJEIRAS            RO       Norte    
 6 COLORADO DO OESTE     RO       Norte    
 7 CORUMBIARA            RO       Norte    
 8 COSTA MARQUES         RO       Norte    
 9 ESPIGÃO D'OESTE       RO       Norte    
10 GUAJARÁ-MIRIM         RO       Norte    
# ℹ 16,676 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># is.factor() # dado categórico</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"># is.Date() # data</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="arrange" class="level2">
<h2 class="anchored" data-anchor-id="arrange">arrange</h2>
<p>Podemos ordenar a base de dados com a função <code>arrange()</code>.</p>
<p>Sintaxe: arrange(nome_da_base, coluna_para_usar_para_ordenar)</p>
<p>O padrão de ordenação é crescente:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(dados_pnud, pop)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 5107743 SANTA CR… MT       Centro-O… 0.397  0.138  0.708  0.642    67.5
 2  1991 5108303 UNIÃO DO… MT       Centro-O… 0.309  0.06   0.698  0.705    66.8
 3  1991 1100452 BURITIS   RO       Norte     0.325  0.113  0.638  0.474    63.3
 4  1991 5107875 SAPEZAL   MT       Centro-O… 0.341  0.077  0.78   0.663    71.8
 5  1991 1720150 SÃO FÉLI… TO       Norte     0.294  0.137  0.512  0.362    55.7
 6  1991 5102686 CAMPOS D… MT       Centro-O… 0.46   0.226  0.713  0.604    67.8
 7  1991 3507209 BORÁ      SP       Sudeste   0.506  0.307  0.76   0.555    70.6
 8  1991 5212253 LAGOA SA… GO       Centro-O… 0.382  0.141  0.718  0.551    68.1
 9  2000 5212253 LAGOA SA… GO       Centro-O… 0.559  0.366  0.815  0.585    73.9
10  2000 3507209 BORÁ      SP       Sudeste   0.649  0.527  0.794  0.652    72.6
# ℹ 16,676 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Para ordenar de forma decrescente, podemos usar a função <code>desc()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(dados_pnud, <span class="fu">desc</span>(pop))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  2010 3550308 SÃO PAULO SP       Sudeste   0.805  0.725  0.855  0.843    76.3
 2  2000 3550308 SÃO PAULO SP       Sudeste   0.733  0.614  0.796  0.807    72.8
 3  1991 3550308 SÃO PAULO SP       Sudeste   0.626  0.421  0.742  0.784    69.5
 4  2010 3304557 RIO DE J… RJ       Sudeste   0.799  0.719  0.845  0.84     75.7
 5  2000 3304557 RIO DE J… RJ       Sudeste   0.716  0.607  0.754  0.803    70.3
 6  1991 3304557 RIO DE J… RJ       Sudeste   0.639  0.483  0.714  0.757    67.8
 7  2010 2927408 SALVADOR  BA       Nordeste  0.759  0.679  0.835  0.772    75.1
 8  2010 5300108 BRASÍLIA  DF       Centro-O… 0.824  0.742  0.873  0.863    77.4
 9  2010 2304400 FORTALEZA CE       Nordeste  0.754  0.695  0.824  0.749    74.4
10  2000 2927408 SALVADOR  BA       Nordeste  0.654  0.525  0.744  0.715    69.6
# ℹ 16,676 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Podemos ordenar de acordo com os valores de duas colunas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(dados_pnud, <span class="fu">desc</span>(ano), <span class="fu">desc</span>(pop))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  2010 3550308 SÃO PAULO SP       Sudeste   0.805  0.725  0.855  0.843    76.3
 2  2010 3304557 RIO DE J… RJ       Sudeste   0.799  0.719  0.845  0.84     75.7
 3  2010 2927408 SALVADOR  BA       Nordeste  0.759  0.679  0.835  0.772    75.1
 4  2010 5300108 BRASÍLIA  DF       Centro-O… 0.824  0.742  0.873  0.863    77.4
 5  2010 2304400 FORTALEZA CE       Nordeste  0.754  0.695  0.824  0.749    74.4
 6  2010 3106200 Belo Hor… MG       Sudeste   0.81   0.737  0.856  0.841    76.4
 7  2010 1302603 MANAUS    AM       Norte     0.737  0.658  0.826  0.738    74.5
 8  2010 4106902 CURITIBA  PR       Sul       0.823  0.768  0.855  0.85     76.3
 9  2010 2611606 RECIFE    PE       Nordeste  0.772  0.698  0.825  0.798    74.5
10  2010 4314902 PORTO AL… RS       Sul       0.805  0.702  0.857  0.867    76.4
# ℹ 16,676 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<p>A ordenação de textos segue a ordem alfabética:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(dados_pnud, muni_nm)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 5200050 ABADIA D… GO       Centro-O… 0.408  0.183  0.658  0.563    64.5
 2  2000 5200050 ABADIA D… GO       Centro-O… 0.569  0.386  0.765  0.623    70.9
 3  2010 5200050 ABADIA D… GO       Centro-O… 0.708  0.622  0.83   0.687    74.8
 4  1991 5200100 ABADIÂNIA GO       Centro-O… 0.41   0.188  0.656  0.56     64.4
 5  2000 5200100 ABADIÂNIA GO       Centro-O… 0.503  0.292  0.73   0.598    68.8
 6  2010 5200100 ABADIÂNIA GO       Centro-O… 0.689  0.579  0.841  0.671    75.5
 7  1991 1500107 ABAETETU… PA       Norte     0.386  0.175  0.669  0.49     65.2
 8  2000 1500107 ABAETETU… PA       Norte     0.501  0.32   0.75   0.523    70.0
 9  2010 1500107 ABAETETU… PA       Norte     0.628  0.537  0.798  0.579    72.9
10  1991 2300101 ABAIARA   CE       Nordeste  0.286  0.103  0.6    0.377    61  
# ℹ 16,676 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(dados_pnud, muni_nm, <span class="at">.locale =</span> <span class="st">"pt_BR"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 5200050 ABADIA D… GO       Centro-O… 0.408  0.183  0.658  0.563    64.5
 2  2000 5200050 ABADIA D… GO       Centro-O… 0.569  0.386  0.765  0.623    70.9
 3  2010 5200050 ABADIA D… GO       Centro-O… 0.708  0.622  0.83   0.687    74.8
 4  1991 3100104 Abadia d… MG       Sudeste   0.449  0.225  0.728  0.551    68.7
 5  2000 3100104 Abadia d… MG       Sudeste   0.575  0.387  0.799  0.616    72.9
 6  2010 3100104 Abadia d… MG       Sudeste   0.689  0.563  0.839  0.693    75.4
 7  1991 5200100 ABADIÂNIA GO       Centro-O… 0.41   0.188  0.656  0.56     64.4
 8  2000 5200100 ABADIÂNIA GO       Centro-O… 0.503  0.292  0.73   0.598    68.8
 9  2010 5200100 ABADIÂNIA GO       Centro-O… 0.689  0.579  0.841  0.671    75.5
10  1991 3100203 Abaeté    MG       Sudeste   0.417  0.18   0.717  0.561    68.0
# ℹ 16,676 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="pipe" class="level2">
<h2 class="anchored" data-anchor-id="pipe">pipe</h2>
<p>É comum fazer mais de uma operação em sequência. Por exemplo: selecionar colunas, e depois ordenar!</p>
<p>Objetivo: gerar uma base que tem as colunas referentes ao ano, sigla da UF, nome do município e população. Essa base deve estar ordenada por ano e população.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># forma 1</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>base_selecionada <span class="ot">&lt;-</span> <span class="fu">select</span>(dados_pnud, ano, uf_sigla,  muni_nm, pop)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(base_selecionada, ano, pop)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 4
     ano uf_sigla muni_nm                   pop
   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;
 1  1991 MT       SANTA CRUZ DO XINGU       377
 2  1991 MT       UNIÃO DO SUL              405
 3  1991 RO       BURITIS                   500
 4  1991 MT       SAPEZAL                   547
 5  1991 TO       SÃO FÉLIX DO TOCANTINS    699
 6  1991 MT       CAMPOS DE JÚLIO           703
 7  1991 SP       BORÁ                      716
 8  1991 GO       LAGOA SANTA               741
 9  1991 TO       RIO DA CONCEIÇÃO          813
10  1991 MT       SANTA RITA DO TRIVELATO   813
# ℹ 16,676 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># forma 2</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(<span class="fu">select</span>(dados_pnud, ano, uf_sigla,  muni_nm, pop), ano, pop)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 4
     ano uf_sigla muni_nm                   pop
   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;
 1  1991 MT       SANTA CRUZ DO XINGU       377
 2  1991 MT       UNIÃO DO SUL              405
 3  1991 RO       BURITIS                   500
 4  1991 MT       SAPEZAL                   547
 5  1991 TO       SÃO FÉLIX DO TOCANTINS    699
 6  1991 MT       CAMPOS DE JÚLIO           703
 7  1991 SP       BORÁ                      716
 8  1991 GO       LAGOA SANTA               741
 9  1991 TO       RIO DA CONCEIÇÃO          813
10  1991 MT       SANTA RITA DO TRIVELATO   813
# ℹ 16,676 more rows</code></pre>
</div>
</div>
<p>Podemos reescrever esse código com o pipe. O pipe conecta as operações, passando o resultado da última operação como primeiro argumento das próximas etapas.</p>
<ul>
<li><p><code>|&gt;</code> é o pipe do base R, funciona a partir da versão 4.1 do R.</p></li>
<li><p><code>%&gt;%</code> é a versão do tidyverse OU magrittr</p></li>
<li><p>atalho: CTRL + SHIFT + M (ou COMMAND + Shift + M no Mac)</p></li>
<li><p>Atalho: Tools -&gt; Global Options -&gt; Code -&gt; Use native pipe operator</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ano, uf_sigla,  muni_nm, pop) <span class="sc">|&gt;</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(ano, pop)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 4
     ano uf_sigla muni_nm                   pop
   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;                   &lt;dbl&gt;
 1  1991 MT       SANTA CRUZ DO XINGU       377
 2  1991 MT       UNIÃO DO SUL              405
 3  1991 RO       BURITIS                   500
 4  1991 MT       SAPEZAL                   547
 5  1991 TO       SÃO FÉLIX DO TOCANTINS    699
 6  1991 MT       CAMPOS DE JÚLIO           703
 7  1991 SP       BORÁ                      716
 8  1991 GO       LAGOA SANTA               741
 9  1991 TO       RIO DA CONCEIÇÃO          813
10  1991 MT       SANTA RITA DO TRIVELATO   813
# ℹ 16,676 more rows</code></pre>
</div>
</div>
</section>
<section id="pausa-nos-verbos-distinct-unique-count" class="level2">
<h2 class="anchored" data-anchor-id="pausa-nos-verbos-distinct-unique-count">Pausa nos verbos: distinct, unique, count</h2>
<p>Quais são os valores únicos/distintos em uma coluna?</p>
<ul>
<li>A base dados_pnud possui informações referentes à quais anos?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distinct</span>(dados_pnud, ano) <span class="co"># retorna uma tabela</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
    ano
  &lt;dbl&gt;
1  1991
2  2000
3  2010</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(dados_pnud<span class="sc">$</span>ano) <span class="co"># retorna um vetor</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1991 2000 2010</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(regiao_nm, uf_sigla)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 27 × 2
   regiao_nm uf_sigla
   &lt;chr&gt;     &lt;chr&gt;   
 1 Norte     RO      
 2 Norte     AC      
 3 Norte     AM      
 4 Norte     RR      
 5 Norte     PA      
 6 Norte     AP      
 7 Norte     TO      
 8 Nordeste  MA      
 9 Nordeste  PI      
10 Nordeste  CE      
# ℹ 17 more rows</code></pre>
</div>
</div>
<ul>
<li>A base dados_pnud possui informações referentes à quais UFs?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">distinct</span>(dados_pnud, uf_sigla)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 27 × 1
   uf_sigla
   &lt;chr&gt;   
 1 RO      
 2 AC      
 3 AM      
 4 RR      
 5 PA      
 6 AP      
 7 TO      
 8 MA      
 9 PI      
10 CE      
# ℹ 17 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(dados_pnud<span class="sc">$</span>uf_sigla)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "RO" "AC" "AM" "RR" "PA" "AP" "TO" "MA" "PI" "CE" "RN" "PB" "PE" "AL" "SE"
[16] "BA" "MG" "ES" "RJ" "SP" "PR" "SC" "RS" "MS" "MT" "GO" "DF"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ano, regiao_nm, uf_sigla, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 81 × 4
     ano regiao_nm uf_sigla     n
   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;int&gt;
 1  1991 Sudeste   MG         853
 2  2000 Sudeste   MG         853
 3  2010 Sudeste   MG         853
 4  1991 Sudeste   SP         645
 5  2000 Sudeste   SP         645
 6  2010 Sudeste   SP         645
 7  1991 Sul       RS         495
 8  2000 Sul       RS         495
 9  2010 Sul       RS         495
10  1991 Nordeste  BA         417
# ℹ 71 more rows</code></pre>
</div>
</div>
</section>
<section id="filter" class="level2">
<h2 class="anchored" data-anchor-id="filter">filter</h2>
<ul>
<li>Para entender filtros, precisamos conhecer alguns conceitos de lógica.</li>
</ul>
<section id="comparações-lógicas" class="level3">
<h3 class="anchored" data-anchor-id="comparações-lógicas">Comparações lógicas</h3>
<ul>
<li>Comparações lógicas:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># == significa: uma coisa é igual a outra?</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Teste com resultado verdadeiro</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> <span class="dv">1</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Teste com resultado falso</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> <span class="dv">2</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<ul>
<li><p>Exemplo com filtros: Filtrando uma coluna da base: O que for TRUE (verdadeiro) será mantido!</p></li>
<li><p>Filtrar apenas informações referentes ao ano de 2010:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span>) <span class="co"># |&gt; </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5,562 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  2010 1100015 ALTA FLO… RO       Norte     0.641  0.526  0.763  0.657    70.8
 2  2010 1100023 ARIQUEMES RO       Norte     0.702  0.6    0.806  0.716    73.4
 3  2010 1100031 CABIXI    RO       Norte     0.65   0.559  0.757  0.65     70.4
 4  2010 1100049 CACOAL    RO       Norte     0.718  0.62   0.821  0.727    74.3
 5  2010 1100056 CEREJEIR… RO       Norte     0.692  0.602  0.799  0.688    72.9
 6  2010 1100064 COLORADO… RO       Norte     0.685  0.584  0.814  0.676    73.8
 7  2010 1100072 CORUMBIA… RO       Norte     0.613  0.473  0.774  0.63     71.4
 8  2010 1100080 COSTA MA… RO       Norte     0.611  0.493  0.751  0.616    70.0
 9  2010 1100098 ESPIGÃO … RO       Norte     0.672  0.536  0.819  0.691    74.2
10  2010 1100106 GUAJARÁ-… RO       Norte     0.657  0.519  0.823  0.663    74.4
# ℹ 5,552 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># distinct(ano)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Filtrar apenas informações referentes ao ano de 2010, e que sejam do estado de SP:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span>, uf_sigla <span class="sc">==</span> <span class="st">"SP"</span>) <span class="co">#|&gt; </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 645 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  2010 3500105 ADAMANTI… SP       Sudeste   0.79   0.75   0.852  0.772    76.1
 2  2010 3500204 ADOLFO    SP       Sudeste   0.73   0.648  0.844  0.71     75.6
 3  2010 3500303 AGUAÍ     SP       Sudeste   0.715  0.606  0.858  0.703    76.5
 4  2010 3500402 ÁGUAS DA… SP       Sudeste   0.781  0.716  0.886  0.75     78.1
 5  2010 3500501 ÁGUAS DE… SP       Sudeste   0.745  0.675  0.846  0.725    75.8
 6  2010 3500550 ÁGUAS DE… SP       Sudeste   0.757  0.695  0.84   0.744    75.4
 7  2010 3500600 ÁGUAS DE… SP       Sudeste   0.854  0.825  0.89   0.849    78.4
 8  2010 3500709 AGUDOS    SP       Sudeste   0.745  0.694  0.845  0.705    75.7
 9  2010 3500758 ALAMBARI  SP       Sudeste   0.712  0.658  0.805  0.682    73.3
10  2010 3500808 ALFREDO … SP       Sudeste   0.741  0.71   0.84   0.682    75.4
# ℹ 635 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># distinct(ano, uf_sigla)</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co"># cuidado com maiúsculas e minúsculas!</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span>, uf_sigla <span class="sc">==</span> <span class="st">"sp"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 15
# ℹ 15 variables: ano &lt;dbl&gt;, muni_id &lt;dbl&gt;, muni_nm &lt;chr&gt;, uf_sigla &lt;chr&gt;,
#   regiao_nm &lt;chr&gt;, idhm &lt;dbl&gt;, idhm_e &lt;dbl&gt;, idhm_l &lt;dbl&gt;, idhm_r &lt;dbl&gt;,
#   espvida &lt;dbl&gt;, rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<ul>
<li>Comparações lógicas:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span><span class="dv">1</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="co"># maior que </span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">3</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">0</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># menor que</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;</span> <span class="dv">3</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;</span> <span class="dv">0</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># atencao</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;</span> <span class="dv">1</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="co"># Maior ou igual à</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;</span> <span class="dv">1</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;=</span> <span class="dv">1</span> <span class="co"># menor ou igual à </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Exemplos com filtros:</p>
<ul>
<li>Filtrar apenas municípios que, no ano de 2010, tinham uma população igual ou maior à 1 milhão, e ordenar a base pela população (de forma decrescente).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span>, pop <span class="sc">&gt;=</span> <span class="dv">1000000</span>) <span class="sc">|&gt;</span> </span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pop))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  2010 3550308 SÃO PAULO SP       Sudeste   0.805  0.725  0.855  0.843    76.3
 2  2010 3304557 RIO DE J… RJ       Sudeste   0.799  0.719  0.845  0.84     75.7
 3  2010 2927408 SALVADOR  BA       Nordeste  0.759  0.679  0.835  0.772    75.1
 4  2010 5300108 BRASÍLIA  DF       Centro-O… 0.824  0.742  0.873  0.863    77.4
 5  2010 2304400 FORTALEZA CE       Nordeste  0.754  0.695  0.824  0.749    74.4
 6  2010 3106200 Belo Hor… MG       Sudeste   0.81   0.737  0.856  0.841    76.4
 7  2010 1302603 MANAUS    AM       Norte     0.737  0.658  0.826  0.738    74.5
 8  2010 4106902 CURITIBA  PR       Sul       0.823  0.768  0.855  0.85     76.3
 9  2010 2611606 RECIFE    PE       Nordeste  0.772  0.698  0.825  0.798    74.5
10  2010 4314902 PORTO AL… RS       Sul       0.805  0.702  0.857  0.867    76.4
11  2010 1501402 BELÉM     PA       Norte     0.746  0.673  0.822  0.751    74.3
12  2010 5208707 GOIÂNIA   GO       Centro-O… 0.799  0.739  0.838  0.824    75.3
13  2010 3518800 GUARULHOS SP       Sudeste   0.763  0.717  0.831  0.746    74.8
14  2010 3509502 CAMPINAS  SP       Sudeste   0.805  0.731  0.86   0.829    76.6
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<ul>
<li>Comparações lógicas:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># != significa diferente de:</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">!=</span> <span class="dv">2</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">!=</span> <span class="dv">1</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Exemplos com filtros:</p>
<ul>
<li>Filtrar apenas dados que não sejam do ano de 1991.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">!=</span> <span class="dv">1991</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11,124 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  2000 1100015 ALTA FLO… RO       Norte     0.483  0.262  0.698  0.617    66.9
 2  2000 1100023 ARIQUEMES RO       Norte     0.556  0.343  0.742  0.674    69.5
 3  2000 1100031 CABIXI    RO       Norte     0.488  0.284  0.677  0.604    65.6
 4  2000 1100049 CACOAL    RO       Norte     0.567  0.377  0.745  0.65     69.7
 5  2000 1100056 CEREJEIR… RO       Norte     0.542  0.338  0.704  0.668    67.2
 6  2000 1100064 COLORADO… RO       Norte     0.545  0.362  0.71   0.629    67.6
 7  2000 1100072 CORUMBIA… RO       Norte     0.401  0.185  0.649  0.539    63.9
 8  2000 1100080 COSTA MA… RO       Norte     0.486  0.295  0.65   0.598    64.0
 9  2000 1100098 ESPIGÃO … RO       Norte     0.501  0.276  0.71   0.64     67.6
10  2000 1100106 GUAJARÁ-… RO       Norte     0.573  0.398  0.742  0.638    69.5
# ℹ 11,114 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<ul>
<li>Comparações lógicas:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># operador %in%</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># o x faz parte desse conjunto 1, 2 e 3?</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Exemplos com filtros:</p>
<ul>
<li>Filtrar apenas dados de estados das pessoas participantes do curso:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(uf_sigla <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"SP"</span>, <span class="st">"RJ"</span>)) <span class="co"># |&gt; </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2,208 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 3300100 ANGRA DO… RJ       Sudeste   0.492  0.27   0.707  0.625    67.4
 2  1991 3300159 APERIBÉ   RJ       Sudeste   0.483  0.3    0.7    0.535    67.0
 3  1991 3300209 ARARUAMA  RJ       Sudeste   0.449  0.228  0.676  0.587    65.6
 4  1991 3300225 AREAL     RJ       Sudeste   0.491  0.288  0.715  0.575    67.9
 5  1991 3300233 ARMAÇÃO … RJ       Sudeste   0.489  0.277  0.652  0.646    64.1
 6  1991 3300258 ARRAIAL … RJ       Sudeste   0.513  0.309  0.7    0.624    67.0
 7  1991 3300308 BARRA DO… RJ       Sudeste   0.541  0.368  0.686  0.627    66.2
 8  1991 3300407 BARRA MA… RJ       Sudeste   0.527  0.324  0.721  0.625    68.3
 9  1991 3300456 BELFORD … RJ       Sudeste   0.468  0.288  0.63   0.566    62.8
10  1991 3300506 BOM JARD… RJ       Sudeste   0.412  0.18   0.644  0.604    63.6
# ℹ 2,198 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a> <span class="co">#  distinct(uf_sigla)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># estados que NAO fazem parte do conjunto criado</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span> uf_sigla <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"SP"</span>, <span class="st">"RJ"</span>, <span class="st">"PR"</span>, <span class="st">"MG"</span>)) <span class="co">#|&gt; </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10,722 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100015 ALTA FLO… RO       Norte     0.329  0.112  0.617  0.516    62.0
 2  1991 1100023 ARIQUEMES RO       Norte     0.432  0.199  0.684  0.593    66.0
 3  1991 1100031 CABIXI    RO       Norte     0.309  0.108  0.636  0.43     63.2
 4  1991 1100049 CACOAL    RO       Norte     0.407  0.171  0.667  0.593    65.0
 5  1991 1100056 CEREJEIR… RO       Norte     0.386  0.167  0.629  0.547    62.7
 6  1991 1100064 COLORADO… RO       Norte     0.376  0.151  0.658  0.536    64.5
 7  1991 1100072 CORUMBIA… RO       Norte     0.203  0.039  0.572  0.373    59.3
 8  1991 1100080 COSTA MA… RO       Norte     0.425  0.22   0.629  0.553    62.8
 9  1991 1100098 ESPIGÃO … RO       Norte     0.388  0.159  0.653  0.561    64.2
10  1991 1100106 GUAJARÁ-… RO       Norte     0.468  0.247  0.662  0.625    64.7
# ℹ 10,712 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># distinct(uf_sigla)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="operadores-lógicos--" class="level3">
<h3 class="anchored" data-anchor-id="operadores-lógicos--">Operadores lógicos - &amp;, | , !</h3>
</section>
<section id="e" class="level3">
<h3 class="anchored" data-anchor-id="e">&amp; - E</h3>
<ul>
<li>Para ser verdadeiro, os dois lados precisam resultar em TRUE:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&gt;=</span> <span class="dv">3</span> <span class="sc">&amp;</span> x <span class="sc">&lt;=</span><span class="dv">7</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># TRUE &amp; TRUE = TRUE</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>y <span class="sc">&gt;=</span> <span class="dv">3</span> <span class="sc">&amp;</span> y <span class="sc">&lt;=</span> <span class="dv">7</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># FALSE &amp; TRUE = FALSE</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Exemplos com filtros:</p>
<ul>
<li><p>No filter, a virgula funciona como o &amp;!</p></li>
<li><p>Filtrar apenas informações referentes ao ano de 2010, e que sejam do estado de SP:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span>, uf_sigla <span class="sc">==</span> <span class="st">"SP"</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 645 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  2010 3500105 ADAMANTI… SP       Sudeste   0.79   0.75   0.852  0.772    76.1
 2  2010 3500204 ADOLFO    SP       Sudeste   0.73   0.648  0.844  0.71     75.6
 3  2010 3500303 AGUAÍ     SP       Sudeste   0.715  0.606  0.858  0.703    76.5
 4  2010 3500402 ÁGUAS DA… SP       Sudeste   0.781  0.716  0.886  0.75     78.1
 5  2010 3500501 ÁGUAS DE… SP       Sudeste   0.745  0.675  0.846  0.725    75.8
 6  2010 3500550 ÁGUAS DE… SP       Sudeste   0.757  0.695  0.84   0.744    75.4
 7  2010 3500600 ÁGUAS DE… SP       Sudeste   0.854  0.825  0.89   0.849    78.4
 8  2010 3500709 AGUDOS    SP       Sudeste   0.745  0.694  0.845  0.705    75.7
 9  2010 3500758 ALAMBARI  SP       Sudeste   0.712  0.658  0.805  0.682    73.3
10  2010 3500808 ALFREDO … SP       Sudeste   0.741  0.71   0.84   0.682    75.4
# ℹ 635 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="ou" class="level3">
<h3 class="anchored" data-anchor-id="ou">| - OU</h3>
<ul>
<li>Para resultar TRUE, apenas um dos lados precisa ser verdadeiro</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>y <span class="sc">&gt;=</span> <span class="dv">3</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>y <span class="sc">&lt;=</span> <span class="dv">7</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>y <span class="sc">&gt;=</span> <span class="dv">3</span> <span class="sc">|</span> y <span class="sc">&lt;=</span> <span class="dv">7</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>y <span class="sc">&gt;=</span> <span class="dv">3</span> <span class="sc">|</span> y <span class="sc">&lt;=</span> <span class="dv">0</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Exemplos com filtros:</p>
<ul>
<li>Filtrar informações referentes ao ano de 2010 OU que sejam do estado de SP:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">|</span> uf_sigla <span class="sc">==</span> <span class="st">"SP"</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,852 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 3500105 ADAMANTI… SP       Sudeste   0.592  0.423  0.731  0.672    68.9
 2  1991 3500204 ADOLFO    SP       Sudeste   0.513  0.296  0.751  0.608    70.0
 3  1991 3500303 AGUAÍ     SP       Sudeste   0.491  0.26   0.719  0.634    68.1
 4  1991 3500402 ÁGUAS DA… SP       Sudeste   0.576  0.365  0.775  0.674    71.5
 5  1991 3500501 ÁGUAS DE… SP       Sudeste   0.558  0.347  0.756  0.664    70.3
 6  1991 3500550 ÁGUAS DE… SP       Sudeste   0.559  0.363  0.742  0.65     69.5
 7  1991 3500600 ÁGUAS DE… SP       Sudeste   0.634  0.405  0.785  0.803    72.1
 8  1991 3500709 AGUDOS    SP       Sudeste   0.513  0.298  0.718  0.63     68.1
 9  1991 3500758 ALAMBARI  SP       Sudeste   0.418  0.174  0.688  0.612    66.3
10  1991 3500808 ALFREDO … SP       Sudeste   0.55   0.366  0.732  0.62     68.9
# ℹ 6,842 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span> <span class="sc">|</span> uf_sigla <span class="sc">==</span> <span class="st">"SP"</span>) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6,852 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 3500105 ADAMANTI… SP       Sudeste   0.592  0.423  0.731  0.672    68.9
 2  1991 3500204 ADOLFO    SP       Sudeste   0.513  0.296  0.751  0.608    70.0
 3  1991 3500303 AGUAÍ     SP       Sudeste   0.491  0.26   0.719  0.634    68.1
 4  1991 3500402 ÁGUAS DA… SP       Sudeste   0.576  0.365  0.775  0.674    71.5
 5  1991 3500501 ÁGUAS DE… SP       Sudeste   0.558  0.347  0.756  0.664    70.3
 6  1991 3500550 ÁGUAS DE… SP       Sudeste   0.559  0.363  0.742  0.65     69.5
 7  1991 3500600 ÁGUAS DE… SP       Sudeste   0.634  0.405  0.785  0.803    72.1
 8  1991 3500709 AGUDOS    SP       Sudeste   0.513  0.298  0.718  0.63     68.1
 9  1991 3500758 ALAMBARI  SP       Sudeste   0.418  0.174  0.688  0.612    66.3
10  1991 3500808 ALFREDO … SP       Sudeste   0.55   0.366  0.732  0.62     68.9
# ℹ 6,842 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="not" class="level3">
<h3 class="anchored" data-anchor-id="not">! - NOT</h3>
<ul>
<li>Negação - É o “contrário”.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">TRUE</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">FALSE</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Exemplos com filtros:</p>
<ul>
<li>Filtrar informações que não sejam do estado de São Paulo ou Rio de Janeiro:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>uf_sigla <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"SP"</span>, <span class="st">"RJ"</span>)) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,478 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100015 ALTA FLO… RO       Norte     0.329  0.112  0.617  0.516    62.0
 2  1991 1100023 ARIQUEMES RO       Norte     0.432  0.199  0.684  0.593    66.0
 3  1991 1100031 CABIXI    RO       Norte     0.309  0.108  0.636  0.43     63.2
 4  1991 1100049 CACOAL    RO       Norte     0.407  0.171  0.667  0.593    65.0
 5  1991 1100056 CEREJEIR… RO       Norte     0.386  0.167  0.629  0.547    62.7
 6  1991 1100064 COLORADO… RO       Norte     0.376  0.151  0.658  0.536    64.5
 7  1991 1100072 CORUMBIA… RO       Norte     0.203  0.039  0.572  0.373    59.3
 8  1991 1100080 COSTA MA… RO       Norte     0.425  0.22   0.629  0.553    62.8
 9  1991 1100098 ESPIGÃO … RO       Norte     0.388  0.159  0.653  0.561    64.2
10  1991 1100106 GUAJARÁ-… RO       Norte     0.468  0.247  0.662  0.625    64.7
# ℹ 14,468 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<p>INTERVALO</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>letters <span class="sc">|&gt;</span> </span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeLines</span>(<span class="at">sep =</span> <span class="st">", "</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, </code></pre>
</div>
</div>
</section>
<section id="filtros-e-na" class="level3">
<h3 class="anchored" data-anchor-id="filtros-e-na">filtros e NA?</h3>
<ul>
<li>A função filter, por padrão, remove os NAs. Ex:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>))</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 1
      x
  &lt;dbl&gt;
1     1
2     2
3     3
4    NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df, x <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="co"># por padrão, o filter remove os NAs das colunas que usamos</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
      x
  &lt;dbl&gt;
1     2
2     3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># manter os NAs!</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(df, x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">|</span> <span class="fu">is.na</span>(x))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
      x
  &lt;dbl&gt;
1     2
2     3
3    NA</code></pre>
</div>
</div>
<ul>
<li>E como remover NAs?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(x))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
      x
  &lt;dbl&gt;
1     1
2     2
3     3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># o código anterior é equivalente à </span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(x)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 1
      x
  &lt;dbl&gt;
1     1
2     2
3     3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()  <span class="co"># cuidado, o drop_na() sem argumento remove todas as linhas</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 29 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 3 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 4 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 5 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 6 Biggs D…    183    84 black      light      brown           24   male  mascu…
 7 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
 8 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…
 9 Chewbac…    228   112 brown      unknown    blue           200   male  mascu…
10 Han Solo    180    80 brown      fair       brown           29   male  mascu…
# ℹ 19 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co"># com algum NA</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(hair_color, birth_year)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 39 × 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 3 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 4 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 5 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 6 Biggs D…    183    84 black      light      brown           24   male  mascu…
 7 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
 8 Anakin …    188    84 blond      fair       blue            41.9 male  mascu…
 9 Wilhuff…    180    NA auburn, g… fair       blue            64   male  mascu…
10 Chewbac…    228   112 brown      unknown    blue           200   male  mascu…
# ℹ 29 more rows
# ℹ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="filtrando-textos" class="level3">
<h3 class="anchored" data-anchor-id="filtrando-textos">filtrando textos</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>textos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"aa"</span>, <span class="st">"abc"</span>, <span class="st">"bc"</span>, <span class="st">"A"</span>, <span class="cn">NA</span>)</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>textos</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a"   "aa"  "abc" "bc"  "A"   NA   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_detect</span>(textos, <span class="at">pattern =</span>  <span class="st">"a"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE  TRUE FALSE FALSE    NA</code></pre>
</div>
</div>
<p>Filtrar municípios que possuem o padrão <code>SÃO</code> no nome:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(muni_nm, <span class="st">"SÃO"</span>)) <span class="co"># detecta um texto</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 918 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100320 SÃO MIGU… RO       Norte     0.252  0.066  0.559  0.433    58.6
 2  1991 1101484 SÃO FELI… RO       Norte     0.232  0.047  0.629  0.425    62.7
 3  1991 1101492 SÃO FRAN… RO       Norte     0.298  0.086  0.647  0.476    63.8
 4  1991 1303809 SÃO GABR… AM       Norte     0.388  0.169  0.635  0.545    63.1
 5  1991 1303908 SÃO PAUL… AM       Norte     0.269  0.095  0.576  0.357    59.6
 6  1991 1303957 SÃO SEBA… AM       Norte     0.354  0.187  0.614  0.385    61.8
 7  1991 1400506 SÃO JOÃO… RR       Norte     0.365  0.143  0.655  0.519    64.3
 8  1991 1400605 SÃO LUIZ  RR       Norte     0.348  0.115  0.645  0.57     63.7
 9  1991 1507102 SÃO CAET… PA       Norte     0.337  0.122  0.669  0.468    65.2
10  1991 1507151 SÃO DOMI… PA       Norte     0.285  0.08   0.634  0.458    63.0
# ℹ 908 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_starts</span>(muni_nm, <span class="st">"SÃO "</span>)) <span class="co"># COMEÇA com um texto</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 849 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100320 SÃO MIGU… RO       Norte     0.252  0.066  0.559  0.433    58.6
 2  1991 1101484 SÃO FELI… RO       Norte     0.232  0.047  0.629  0.425    62.7
 3  1991 1101492 SÃO FRAN… RO       Norte     0.298  0.086  0.647  0.476    63.8
 4  1991 1303809 SÃO GABR… AM       Norte     0.388  0.169  0.635  0.545    63.1
 5  1991 1303908 SÃO PAUL… AM       Norte     0.269  0.095  0.576  0.357    59.6
 6  1991 1303957 SÃO SEBA… AM       Norte     0.354  0.187  0.614  0.385    61.8
 7  1991 1400506 SÃO JOÃO… RR       Norte     0.365  0.143  0.655  0.519    64.3
 8  1991 1400605 SÃO LUIZ  RR       Norte     0.348  0.115  0.645  0.57     63.7
 9  1991 1507102 SÃO CAET… PA       Norte     0.337  0.122  0.669  0.468    65.2
10  1991 1507151 SÃO DOMI… PA       Norte     0.285  0.08   0.634  0.458    63.0
# ℹ 839 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_ends</span>(muni_nm, <span class="st">"SÃO"</span>)) <span class="co"># termina com um texto</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 15
    ano muni_id muni_nm    uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1  1991 1711902 LAGOA DA … TO       Norte     0.332  0.14   0.541  0.484    57.5
2  1991 3541604 PROMISSÃO  SP       Sudeste   0.521  0.292  0.75   0.647    70.0
3  2000 1711902 LAGOA DA … TO       Norte     0.479  0.281  0.659  0.595    64.5
4  2000 3541604 PROMISSÃO  SP       Sudeste   0.653  0.534  0.775  0.673    71.5
5  2010 1711902 LAGOA DA … TO       Norte     0.627  0.496  0.787  0.63     72.2
6  2010 3541604 PROMISSÃO  SP       Sudeste   0.743  0.666  0.85   0.724    76.0
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_to_lower</span>(dados_pnud<span class="sc">$</span>muni_nm[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "alta floresta d'oeste" "ariquemes"             "cabixi"               
 [4] "cacoal"                "cerejeiras"            "colorado do oeste"    
 [7] "corumbiara"            "costa marques"         "espigão d'oeste"      
[10] "guajará-mirim"        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(muni_nm), <span class="st">"são"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,098 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100320 SÃO MIGU… RO       Norte     0.252  0.066  0.559  0.433    58.6
 2  1991 1101484 SÃO FELI… RO       Norte     0.232  0.047  0.629  0.425    62.7
 3  1991 1101492 SÃO FRAN… RO       Norte     0.298  0.086  0.647  0.476    63.8
 4  1991 1303809 SÃO GABR… AM       Norte     0.388  0.169  0.635  0.545    63.1
 5  1991 1303908 SÃO PAUL… AM       Norte     0.269  0.095  0.576  0.357    59.6
 6  1991 1303957 SÃO SEBA… AM       Norte     0.354  0.187  0.614  0.385    61.8
 7  1991 1400506 SÃO JOÃO… RR       Norte     0.365  0.143  0.655  0.519    64.3
 8  1991 1400605 SÃO LUIZ  RR       Norte     0.348  0.115  0.645  0.57     63.7
 9  1991 1507102 SÃO CAET… PA       Norte     0.337  0.122  0.669  0.468    65.2
10  1991 1507151 SÃO DOMI… PA       Norte     0.285  0.08   0.634  0.458    63.0
# ℹ 1,088 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Filtrar municípios que possuem o padrão <code>SÃO</code> ou <code>São</code> no nome:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(<span class="fu">str_to_upper</span>(muni_nm), <span class="st">"SÃO|SANTO"</span>)) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,317 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100320 SÃO MIGU… RO       Norte     0.252  0.066  0.559  0.433    58.6
 2  1991 1101484 SÃO FELI… RO       Norte     0.232  0.047  0.629  0.425    62.7
 3  1991 1101492 SÃO FRAN… RO       Norte     0.298  0.086  0.647  0.476    63.8
 4  1991 1303700 SANTO AN… AM       Norte     0.206  0.044  0.576  0.346    59.6
 5  1991 1303809 SÃO GABR… AM       Norte     0.388  0.169  0.635  0.545    63.1
 6  1991 1303908 SÃO PAUL… AM       Norte     0.269  0.095  0.576  0.357    59.6
 7  1991 1303957 SÃO SEBA… AM       Norte     0.354  0.187  0.614  0.385    61.8
 8  1991 1400506 SÃO JOÃO… RR       Norte     0.365  0.143  0.655  0.519    64.3
 9  1991 1400605 SÃO LUIZ  RR       Norte     0.348  0.115  0.645  0.57     63.7
10  1991 1507003 SANTO AN… PA       Norte     0.365  0.173  0.609  0.463    61.5
# ℹ 1,307 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(espvida <span class="sc">==</span> <span class="fu">max</span>(espvida))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 15
    ano muni_id muni_nm  uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1  2010 4202404 BLUMENAU SC       Sul       0.806  0.722  0.894  0.812    78.6
2  2010 4202909 BRUSQUE  SC       Sul       0.795  0.707  0.894  0.794    78.6
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span>) <span class="sc">|&gt;</span> </span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> espvida, <span class="at">n =</span> <span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 15
    ano muni_id muni_nm  uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1  2010 4202404 BLUMENAU SC       Sul       0.806  0.722  0.894  0.812    78.6
2  2010 4202909 BRUSQUE  SC       Sul       0.795  0.707  0.894  0.794    78.6
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span>) <span class="sc">|&gt;</span> </span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(<span class="at">order_by =</span> espvida, <span class="at">n =</span> <span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 15
    ano muni_id muni_nm  uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
  &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1  2010 2503555 CACIMBAS PB       Nordeste  0.523  0.425  0.672  0.501    65.3
2  2010 2707800 ROTEIRO  AL       Nordeste  0.505  0.365  0.672  0.524    65.3
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
</section>
<section id="mutate" class="level2">
<h2 class="anchored" data-anchor-id="mutate">mutate</h2>
<ul>
<li><p>Podemos modificar colunas e criar novas colunas usando a função <code>mutate()</code>.</p></li>
<li><p>Exemplo: vamos modificar a coluna pop para que ela armazene a população em milhares.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop =</span> pop<span class="sc">/</span><span class="dv">1000</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 15
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100015 ALTA FLO… RO       Norte     0.329  0.112  0.617  0.516    62.0
 2  1991 1100023 ARIQUEMES RO       Norte     0.432  0.199  0.684  0.593    66.0
 3  1991 1100031 CABIXI    RO       Norte     0.309  0.108  0.636  0.43     63.2
 4  1991 1100049 CACOAL    RO       Norte     0.407  0.171  0.667  0.593    65.0
 5  1991 1100056 CEREJEIR… RO       Norte     0.386  0.167  0.629  0.547    62.7
 6  1991 1100064 COLORADO… RO       Norte     0.376  0.151  0.658  0.536    64.5
 7  1991 1100072 CORUMBIA… RO       Norte     0.203  0.039  0.572  0.373    59.3
 8  1991 1100080 COSTA MA… RO       Norte     0.425  0.22   0.629  0.553    62.8
 9  1991 1100098 ESPIGÃO … RO       Norte     0.388  0.159  0.653  0.561    64.2
10  1991 1100106 GUAJARÁ-… RO       Norte     0.468  0.247  0.662  0.625    64.7
# ℹ 16,676 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
<ul>
<li>Exemplo: vamos criar uma nova coluna chamada <code>pop_mil</code> para que ela armazene a população em milhares.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mil =</span> pop<span class="sc">/</span><span class="dv">1000</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 16
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100015 ALTA FLO… RO       Norte     0.329  0.112  0.617  0.516    62.0
 2  1991 1100023 ARIQUEMES RO       Norte     0.432  0.199  0.684  0.593    66.0
 3  1991 1100031 CABIXI    RO       Norte     0.309  0.108  0.636  0.43     63.2
 4  1991 1100049 CACOAL    RO       Norte     0.407  0.171  0.667  0.593    65.0
 5  1991 1100056 CEREJEIR… RO       Norte     0.386  0.167  0.629  0.547    62.7
 6  1991 1100064 COLORADO… RO       Norte     0.376  0.151  0.658  0.536    64.5
 7  1991 1100072 CORUMBIA… RO       Norte     0.203  0.039  0.572  0.373    59.3
 8  1991 1100080 COSTA MA… RO       Norte     0.425  0.22   0.629  0.553    62.8
 9  1991 1100098 ESPIGÃO … RO       Norte     0.388  0.159  0.653  0.561    64.2
10  1991 1100106 GUAJARÁ-… RO       Norte     0.468  0.247  0.662  0.625    64.7
# ℹ 16,676 more rows
# ℹ 6 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;,
#   pop_mil &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_mil =</span> pop<span class="sc">/</span><span class="dv">1000</span>, <span class="at">.after =</span> pop) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 16
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100015 ALTA FLO… RO       Norte     0.329  0.112  0.617  0.516    62.0
 2  1991 1100023 ARIQUEMES RO       Norte     0.432  0.199  0.684  0.593    66.0
 3  1991 1100031 CABIXI    RO       Norte     0.309  0.108  0.636  0.43     63.2
 4  1991 1100049 CACOAL    RO       Norte     0.407  0.171  0.667  0.593    65.0
 5  1991 1100056 CEREJEIR… RO       Norte     0.386  0.167  0.629  0.547    62.7
 6  1991 1100064 COLORADO… RO       Norte     0.376  0.151  0.658  0.536    64.5
 7  1991 1100072 CORUMBIA… RO       Norte     0.203  0.039  0.572  0.373    59.3
 8  1991 1100080 COSTA MA… RO       Norte     0.425  0.22   0.629  0.553    62.8
 9  1991 1100098 ESPIGÃO … RO       Norte     0.388  0.159  0.653  0.561    64.2
10  1991 1100106 GUAJARÁ-… RO       Norte     0.468  0.247  0.662  0.625    64.7
# ℹ 16,676 more rows
# ℹ 6 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, pop_mil &lt;dbl&gt;,
#   lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># .after e .before ajuda a gente a indicar onde a coluna ficará na tabela</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Como arredondar? Função <code>round()</code>. Vamos experimentar arredondar a coluna de expectativa de vida para ter apenas 1 casa decimal.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">espvida_arredondado =</span> <span class="fu">round</span>(espvida, <span class="dv">1</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 16
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100015 ALTA FLO… RO       Norte     0.329  0.112  0.617  0.516    62.0
 2  1991 1100023 ARIQUEMES RO       Norte     0.432  0.199  0.684  0.593    66.0
 3  1991 1100031 CABIXI    RO       Norte     0.309  0.108  0.636  0.43     63.2
 4  1991 1100049 CACOAL    RO       Norte     0.407  0.171  0.667  0.593    65.0
 5  1991 1100056 CEREJEIR… RO       Norte     0.386  0.167  0.629  0.547    62.7
 6  1991 1100064 COLORADO… RO       Norte     0.376  0.151  0.658  0.536    64.5
 7  1991 1100072 CORUMBIA… RO       Norte     0.203  0.039  0.572  0.373    59.3
 8  1991 1100080 COSTA MA… RO       Norte     0.425  0.22   0.629  0.553    62.8
 9  1991 1100098 ESPIGÃO … RO       Norte     0.388  0.159  0.653  0.561    64.2
10  1991 1100106 GUAJARÁ-… RO       Norte     0.468  0.247  0.662  0.625    64.7
# ℹ 16,676 more rows
# ℹ 6 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;,
#   espvida_arredondado &lt;dbl&gt;</code></pre>
</div>
</div>
<ul>
<li>Classificar: A função <code>ifelse()</code> é uma ótima ferramenta para fazermos classificação com duas categorias. Ex:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ano, uf_sigla, muni_nm, espvida) <span class="sc">|&gt;</span></span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">media_espvida =</span> <span class="fu">mean</span>(espvida),</span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">maior_que_a_media_espvida =</span> <span class="fu">ifelse</span>(</span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>           espvida <span class="sc">&gt;=</span> media_espvida, <span class="st">"Sim"</span>, <span class="st">"Não"</span></span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a>         )) <span class="sc">|&gt;</span> </span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(espvida) <span class="co">#|&gt; </span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 6
     ano uf_sigla muni_nm           espvida media_espvida maior_que_a_media_es…¹
   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;               &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;                 
 1  1991 AL       SÃO JOSÉ DA TAPE…    51.0          68.4 Não                   
 2  1991 PI       ILHA GRANDE          51.2          68.4 Não                   
 3  1991 PB       MARCAÇÃO             51.3          68.4 Não                   
 4  1991 BA       FÁTIMA               51.3          68.4 Não                   
 5  1991 BA       JOÃO DOURADO         51.3          68.4 Não                   
 6  1991 BA       JUSSARA              51.3          68.4 Não                   
 7  1991 PI       PADRE MARCOS         51.4          68.4 Não                   
 8  1991 PE       MANARI               51.5          68.4 Não                   
 9  1991 BA       QUIJINGUE            51.5          68.4 Não                   
10  1991 PE       JUREMA               51.6          68.4 Não                   
# ℹ 16,676 more rows
# ℹ abbreviated name: ¹​maior_que_a_media_espvida</code></pre>
</div>
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">#count(ano, maior_que_a_media_espvida)</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Classificar: a função <code>case_when()</code> é interessante para fazer classificação com várias categorias. Ex: classificar a coluna de expectativa de vida segundo faixas de idade</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>dados_classificados_por_espvida <span class="ot">&lt;-</span> dados_pnud  <span class="sc">|&gt;</span> </span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ano, uf_sigla, muni_nm, espvida) <span class="sc">|&gt;</span></span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class_espvida  =</span> <span class="fu">case_when</span>(</span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>    espvida <span class="sc">&gt;=</span> <span class="dv">50</span> <span class="sc">&amp;</span> espvida <span class="sc">&lt;</span> <span class="dv">60</span> <span class="sc">~</span> <span class="st">"50 - 59 anos"</span>,</span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>    espvida <span class="sc">&gt;=</span> <span class="dv">60</span> <span class="sc">&amp;</span> espvida <span class="sc">&lt;</span> <span class="dv">70</span> <span class="sc">~</span> <span class="st">"60 - 69 anos"</span>,</span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>    espvida <span class="sc">&gt;=</span> <span class="dv">70</span> <span class="sc">&amp;</span> espvida <span class="sc">&lt;</span> <span class="dv">80</span> <span class="sc">~</span> <span class="st">"70 - 79 anos"</span>,</span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"CATEGORIZAR"</span></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 50 &lt;= ESPVIDA &lt; 60 - Isso não funciona</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>E como podemos usar esses dados classificados?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>dados_classificados_por_espvida <span class="sc">|&gt;</span> </span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ano, class_espvida) <span class="sc">|&gt;</span> </span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> class_espvida, <span class="at">x =</span> n) <span class="sc">+</span></span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb194-6"><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(ano))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-manipulacao_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Adicionar uma nova linha</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>(</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ano =</span> <span class="dv">2022</span>,</span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">uf_sigla =</span> <span class="st">"SP"</span>,</span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#....</span></span>
<span id="cb195-6"><a href="#cb195-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb195-7"><a href="#cb195-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(ano))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,687 × 15
     ano muni_id muni_nm  uf_sigla regiao_nm   idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  2022      NA &lt;NA&gt;     SP       &lt;NA&gt;      NA     NA     NA     NA        NA  
 2  2010 1100015 ALTA FL… RO       Norte      0.641  0.526  0.763  0.657    70.8
 3  2010 1100023 ARIQUEM… RO       Norte      0.702  0.6    0.806  0.716    73.4
 4  2010 1100031 CABIXI   RO       Norte      0.65   0.559  0.757  0.65     70.4
 5  2010 1100049 CACOAL   RO       Norte      0.718  0.62   0.821  0.727    74.3
 6  2010 1100056 CEREJEI… RO       Norte      0.692  0.602  0.799  0.688    72.9
 7  2010 1100064 COLORAD… RO       Norte      0.685  0.584  0.814  0.676    73.8
 8  2010 1100072 CORUMBI… RO       Norte      0.613  0.473  0.774  0.63     71.4
 9  2010 1100080 COSTA M… RO       Norte      0.611  0.493  0.751  0.616    70.0
10  2010 1100098 ESPIGÃO… RO       Norte      0.672  0.536  0.819  0.691    74.2
# ℹ 16,677 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="summarise" class="level2">
<h2 class="anchored" data-anchor-id="summarise">summarise</h2>
<ul>
<li><p>Podemos criar resumos da base com a função <code>summarise()</code></p></li>
<li><p>Resumindo a base: qual é a média da expectativa de vida?</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media_espvida =</span> <span class="fu">mean</span>(espvida))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  media_espvida
          &lt;dbl&gt;
1          68.4</code></pre>
</div>
</div>
<p>Isso não ajuda tanto pois obtemos uma informação para a base completa… e como sabemos a média por ano?</p>
</section>
<section id="group_by" class="level2">
<h2 class="anchored" data-anchor-id="group_by">group_by</h2>
<ul>
<li><p>Podemos agrupar os dados com <code>group_by</code>.</p></li>
<li><p>Agrupando por ano:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano, regiao_nm)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,686 × 15
# Groups:   ano, regiao_nm [15]
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1100015 ALTA FLO… RO       Norte     0.329  0.112  0.617  0.516    62.0
 2  1991 1100023 ARIQUEMES RO       Norte     0.432  0.199  0.684  0.593    66.0
 3  1991 1100031 CABIXI    RO       Norte     0.309  0.108  0.636  0.43     63.2
 4  1991 1100049 CACOAL    RO       Norte     0.407  0.171  0.667  0.593    65.0
 5  1991 1100056 CEREJEIR… RO       Norte     0.386  0.167  0.629  0.547    62.7
 6  1991 1100064 COLORADO… RO       Norte     0.376  0.151  0.658  0.536    64.5
 7  1991 1100072 CORUMBIA… RO       Norte     0.203  0.039  0.572  0.373    59.3
 8  1991 1100080 COSTA MA… RO       Norte     0.425  0.22   0.629  0.553    62.8
 9  1991 1100098 ESPIGÃO … RO       Norte     0.388  0.159  0.653  0.561    64.2
10  1991 1100106 GUAJARÁ-… RO       Norte     0.468  0.247  0.662  0.625    64.7
# ℹ 16,676 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="group_by-filterslice_max" class="level2">
<h2 class="anchored" data-anchor-id="group_by-filterslice_max">group_by + filter()/slice_max()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano, uf_sigla) <span class="sc">|&gt;</span> </span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(espvida, <span class="at">n =</span> <span class="dv">1</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 107 × 15
# Groups:   ano, uf_sigla [81]
     ano muni_id muni_nm   uf_sigla regiao_nm  idhm idhm_e idhm_l idhm_r espvida
   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1  1991 1200401 RIO BRAN… AC       Norte     0.485  0.259  0.684  0.643    66.0
 2  1991 2708709 SÃO MIGU… AL       Nordeste  0.337  0.146  0.638  0.411    63.3
 3  1991 1302603 MANAUS    AM       Norte     0.521  0.307  0.681  0.676    65.9
 4  1991 1600238 FERREIRA… AP       Norte     0.32   0.095  0.701  0.492    67.1
 5  1991 2927408 SALVADOR  BA       Nordeste  0.563  0.383  0.679  0.686    65.7
 6  1991 2304400 FORTALEZA CE       Nordeste  0.546  0.367  0.683  0.65     66.0
 7  1991 5300108 BRASÍLIA  DF       Centro-O… 0.616  0.419  0.731  0.762    68.9
 8  1991 3200409 ANCHIETA  ES       Sudeste   0.472  0.248  0.746  0.567    69.8
 9  1991 3201407 CASTELO   ES       Sudeste   0.476  0.255  0.746  0.566    69.8
10  1991 3203130 JOÃO NEI… ES       Sudeste   0.536  0.341  0.746  0.606    69.8
# ℹ 97 more rows
# ℹ 5 more variables: rdpc &lt;dbl&gt;, gini &lt;dbl&gt;, pop &lt;dbl&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="group_by-summarise" class="level2">
<h2 class="anchored" data-anchor-id="group_by-summarise">group_by + summarise</h2>
<ul>
<li>Resumindo a base: qual é a média da expectativa de vida por ano?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano, regiao_nm) <span class="sc">|&gt;</span> </span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media_espvida =</span> <span class="fu">mean</span>(espvida))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'ano'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 3
# Groups:   ano [3]
     ano regiao_nm    media_espvida
   &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;
 1  1991 Centro-Oeste          65.1
 2  1991 Nordeste              58.5
 3  1991 Norte                 61.6
 4  1991 Sudeste               66.6
 5  1991 Sul                   67.9
 6  2000 Centro-Oeste          70.0
 7  2000 Nordeste              64.2
 8  2000 Norte                 66.4
 9  2000 Sudeste               70.8
10  2000 Sul                   71.6
11  2010 Centro-Oeste          74.3
12  2010 Nordeste              70.3
13  2010 Norte                 71.8
14  2010 Sudeste               74.7
15  2010 Sul                   75.1</code></pre>
</div>
</div>
<ul>
<li>Várias sumarizações:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano, regiao_nm) <span class="sc">|&gt;</span> </span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media_espvida =</span> <span class="fu">mean</span>(espvida, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">mediana_espvida =</span> <span class="fu">median</span>(espvida, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">variancia_espvida =</span> <span class="fu">var</span>(espvida, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb206-6"><a href="#cb206-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">desvio_padrao_espvida =</span> <span class="fu">sd</span>(espvida, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb206-7"><a href="#cb206-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_espvida =</span> <span class="fu">min</span>(espvida, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb206-8"><a href="#cb206-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">max_espvida =</span> <span class="fu">max</span>(espvida, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb206-9"><a href="#cb206-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">quant_muni =</span> <span class="fu">n</span>())</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'ano'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 9
# Groups:   ano [3]
     ano regiao_nm    media_espvida mediana_espvida variancia_espvida
   &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;           &lt;dbl&gt;             &lt;dbl&gt;
 1  1991 Centro-Oeste          65.1            64.9              3.29
 2  1991 Nordeste              58.5            58.4              9.44
 3  1991 Norte                 61.6            61.8              7.26
 4  1991 Sudeste               66.6            66.8              6.47
 5  1991 Sul                   67.9            68.0              5.32
 6  2000 Centro-Oeste          70.0            70.1              3.28
 7  2000 Nordeste              64.2            63.9              6.58
 8  2000 Norte                 66.4            66.6              4.64
 9  2000 Sudeste               70.8            70.8              5.23
10  2000 Sul                   71.6            71.6              5.03
11  2010 Centro-Oeste          74.3            74.3              1.23
12  2010 Nordeste              70.3            70.4              3.27
13  2010 Norte                 71.8            71.8              2.97
14  2010 Sudeste               74.7            74.7              2.57
15  2010 Sul                   75.1            75.2              2.47
# ℹ 4 more variables: desvio_padrao_espvida &lt;dbl&gt;, min_espvida &lt;dbl&gt;,
#   max_espvida &lt;dbl&gt;, quant_muni &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="count" class="level2">
<h2 class="anchored" data-anchor-id="count">count</h2>
<ul>
<li>A função count é uma função útil para contar elementos por grupo.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>dados_classificados_por_espvida <span class="sc">|&gt;</span> </span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ano)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
    ano     n
  &lt;dbl&gt; &lt;int&gt;
1  1991  5562
2  2000  5562
3  2010  5562</code></pre>
</div>
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>dados_classificados_por_espvida <span class="sc">|&gt;</span> </span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ano, class_espvida)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 3
    ano class_espvida     n
  &lt;dbl&gt; &lt;chr&gt;         &lt;int&gt;
1  1991 50 - 59 anos   1337
2  1991 60 - 69 anos   3849
3  1991 70 - 79 anos    376
4  2000 50 - 59 anos     75
5  2000 60 - 69 anos   3216
6  2000 70 - 79 anos   2271
7  2010 60 - 69 anos    803
8  2010 70 - 79 anos   4759</code></pre>
</div>
</div>
</section>
<section id="esquisse" class="level2">
<h2 class="anchored" data-anchor-id="esquisse">esquisse</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a>meu_grafico <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados_pnud) <span class="sc">+</span></span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">aes</span>(<span class="at">x =</span> espvida, <span class="at">y =</span> regiao_nm, <span class="at">fill =</span> regiao_nm) <span class="sc">+</span></span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb213-6"><a href="#cb213-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">"viridis"</span>, </span>
<span id="cb213-7"><a href="#cb213-7" aria-hidden="true" tabindex="-1"></a> <span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb213-8"><a href="#cb213-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Esperança de vida"</span>, <span class="at">y =</span> <span class="st">"Região"</span>, <span class="at">title =</span> <span class="st">"Esperança de vida"</span>, <span class="at">caption =</span> <span class="st">"Dados do pacote abjData"</span>, <span class="at">fill =</span> <span class="st">"Região"</span>) <span class="sc">+</span></span>
<span id="cb213-9"><a href="#cb213-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">theme_light</span>() <span class="sc">+</span></span>
<span id="cb213-10"><a href="#cb213-10" aria-hidden="true" tabindex="-1"></a> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span></span>
<span id="cb213-11"><a href="#cb213-11" aria-hidden="true" tabindex="-1"></a> <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(ano))</span>
<span id="cb213-12"><a href="#cb213-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-13"><a href="#cb213-13" aria-hidden="true" tabindex="-1"></a>meu_grafico</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-manipulacao_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"../exemplo_ggplot.png"</span>, <span class="at">plot =</span> meu_grafico,</span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi =</span> <span class="dv">300</span>, <span class="at">width =</span> <span class="dv">10</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Saving 10 x 5 in image</code></pre>
</div>
</div>
</section>
<section id="dúvida-ao-final-da-aula---joins" class="level1">
<h1>Dúvida ao final da aula - Joins</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a>pnud_sp <span class="ot">&lt;-</span> dados_pnud <span class="sc">|&gt;</span> </span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">==</span> <span class="dv">2010</span>) <span class="sc">|&gt;</span> </span>
<span id="cb216-5"><a href="#cb216-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(uf_sigla <span class="sc">==</span> <span class="st">"SP"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb216-6"><a href="#cb216-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">code_muni =</span> muni_id ) <span class="sc">|&gt;</span> </span>
<span id="cb216-7"><a href="#cb216-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">code_muni =</span> <span class="fu">as.numeric</span>(code_muni))</span>
<span id="cb216-8"><a href="#cb216-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-9"><a href="#cb216-9" aria-hidden="true" tabindex="-1"></a>muni_sp <span class="ot">&lt;-</span> geobr<span class="sc">::</span><span class="fu">read_municipality</span>(<span class="st">"SP"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required namespace: sf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Using year 2010</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Downloading: 1.8 kB     
Downloading: 1.8 kB     
Downloading: 34 kB     
Downloading: 34 kB     
Downloading: 99 kB     
Downloading: 99 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 160 kB     
Downloading: 160 kB     
Downloading: 250 kB     
Downloading: 250 kB     
Downloading: 250 kB     
Downloading: 250 kB     
Downloading: 320 kB     
Downloading: 320 kB     
Downloading: 410 kB     
Downloading: 410 kB     
Downloading: 480 kB     
Downloading: 480 kB     
Downloading: 560 kB     
Downloading: 560 kB     
Downloading: 640 kB     
Downloading: 640 kB     
Downloading: 720 kB     
Downloading: 720 kB     
Downloading: 810 kB     
Downloading: 810 kB     
Downloading: 910 kB     
Downloading: 910 kB     
Downloading: 1 MB     
Downloading: 1 MB     
Downloading: 1.1 MB     
Downloading: 1.1 MB     
Downloading: 1.3 MB     
Downloading: 1.3 MB     
Downloading: 1.3 MB     
Downloading: 1.3 MB     
Downloading: 1.3 MB     
Downloading: 1.3 MB     
Downloading: 1.4 MB     
Downloading: 1.4 MB     
Downloading: 1.4 MB     
Downloading: 1.4 MB     
Downloading: 1.4 MB     
Downloading: 1.4 MB     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a>dados_unidos <span class="ot">&lt;-</span> <span class="fu">left_join</span>(muni_sp, pnud_sp, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"code_muni"</span>))</span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a>dados_unidos <span class="sc">|&gt;</span> </span>
<span id="cb220-4"><a href="#cb220-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb220-5"><a href="#cb220-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> espvida)) </span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="3-manipulacao_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>